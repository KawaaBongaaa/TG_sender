<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes, viewport-fit=cover">
    <title>üì¢ Telegram Sender - –ü–∞–Ω–µ–ª—å —Ä–∞—Å—Å—ã–ª–∫–∏</title>

    <!-- Telegram WebApp SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <!-- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ —Å—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="./style-clean.css">
    <link rel="stylesheet" href="./themes.css">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3Eüì¢%3C/text%3E%3C/svg%3E">
</head>

<body>
    <!-- –ü–†–û–°–¢–û–ô –¢–ï–°–¢–û–í–´–ô –ò–ù–¢–ï–†–§–ï–ô–° –ë–ï–ó CSS -->
    <div style="padding: 20px; font-family: monospace;">
        <h1>üöÄ TELEGRAM SENDER</h1>

        <!-- –®–ê–ü–ö–ê –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø -->
        <div class="toolbar">
            <div class="toolbar-group">
                <h1 style="margin: 0; font-size: 20px; font-weight: 600;">üì¢ Telegram Sender</h1>
                <span class="badge badge-info" id="usersCountBadge">üë• 0 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
                <span class="badge badge-success" id="usersSelectedBadge">‚úÖ –í—ã–±—Ä–∞–Ω–æ: 0</span>
            </div>

            <div class="toolbar-group">
                <!-- –ü–ï–†–ï–ö–õ–Æ–ß–ê–¢–ï–õ–¨ –¢–ï–ú -->
                <div class="theme-switcher">
                    <button class="theme-option active" data-theme="light">
                        ‚òÄÔ∏è –°–≤–µ—Ç–ª–∞—è
                    </button>
                    <button class="theme-option" data-theme="dark">
                        üåô –¢–µ–º–Ω–∞—è
                    </button>
                    <button class="theme-option" data-theme="blue-cyan">
                        ‚ùÑÔ∏è –ì–æ–ª—É–±–∞—è
                    </button>
                </div>

                <div style="border-left: 1px solid var(--border); height: 24px; margin: 0 12px;"></div>


                <button id="sendBtn" class="btn-modern btn-destructive-modern">
                    <span>üì§</span>
                    –û—Ç–ø—Ä–∞–≤–∏—Ç—å
                </button>
                <button id="sendMassBtn" class="btn-modern btn-primary-modern">
                    <span>üì¢</span>
                    –ú–∞—Å—Å–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞
                </button>
            </div>
        </div>

        <!-- –û–°–ù–û–í–ù–ê–Ø –°–ï–¢–ö–ê (2x2) -->
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">

            <!-- –õ–ï–í–ê–Ø –ö–û–õ–û–ù–ö–ê -->

            <!-- –°–ï–ö–¶–ò–Ø –£–ü–†–ê–í–õ–ï–ù–ò–Ø –ë–û–¢–ê–ú–ò -->
            <div class="section-blue" style="padding: 15px; border: 2px solid var(--text-accent); border-radius: 10px; background: var(--bg-secondary);">
                <h3 style="margin: 0 0 12px 0; color: var(--text-accent);">ü§ñ –ë–æ—Ç—ã</h3>

                <div style="margin-bottom: 8px;">
                    <select id="botsList" style="width: 100%; margin: 3px 0; padding: 6px;">
                        <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞ --</option>
                    </select>
                </div>

                <div style="margin-bottom: 8px;">
                    <select id="sheetsList" style="width: 100%; margin: 3px 0; padding: 6px;">
                        <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—É --</option>
                    </select>
                </div>

                <div style="display: flex; gap: 5px;">
                    <button id="editBotsBtn" style="flex: 1; padding: 6px; background: var(--accent-primary); color: var(--text-inverse); border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">‚öôÔ∏è –ë–æ—Ç—ã</button>
                    <button id="editSheetsBtn" style="flex: 1; padding: 6px; background: var(--accent-warning); color: var(--text-inverse); border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">üìä –¢–∞–±–ª–∏—Ü—ã</button>
                </div>



                <div id="currentBotInfo" style="margin-top: 10px; padding: 5px; background: var(--bg-tertiary); border-radius: 5px; font-size: 11px; color: var(--text-primary); border: 1px solid var(--border);">
                    –ù–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –±–æ—Ç–∞
                </div>
            </div>

    <!-- –í–°–ü–õ–´–í–ê–Æ–©–ò–ï –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê -->

    <!-- –§–û–†–ú–ê –£–ü–†–ê–í–õ–ï–ù–ò–Ø –ë–û–¢–ê–ú–ò -->
    <div id="modalBackdrop" class="modal-backdrop">
        <div class="wizard-modal" id="botsWizard" style="display: none;">
            <div class="wizard-header">
                <h4 class="wizard-title">ü§ñ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏</h4>
                <button class="wizard-close-btn" onclick="telegramSender.closeAllModals()">√ó</button>
            </div>

                <h4 style="margin: 0 0 15px 0; color: var(--text-accent);">‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞</h4>

                <div style="display: flex; gap: 15px; margin-bottom: 20px;">
                    <div style="flex: 1;">
                        <label style="color: var(--text-primary);">–ù–∞–∑–≤–∞–Ω–∏–µ –±–æ—Ç–∞:</label><br>
                        <input type="text" id="newBotName" placeholder="–ë–æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –≥—Ä—É–ø–ø—ã" style="width: 100%; margin: 5px 0; padding: 8px; background: var(--bg-primary); color: var(--text-primary); border: 1px solid var(--border); border-radius: 6px;">
                    </div>
                    <div style="flex: 2;">
                        <label style="color: var(--text-primary);">API —Ç–æ–∫–µ–Ω:</label><br>
                        <input type="text" id="newBotToken" placeholder="xxxxxxxxxx:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX" style="width: 100%; margin: 5px 0; padding: 8px; background: var(--bg-primary); color: var(--text-primary); border: 1px solid var(--border); border-radius: 6px;">
                    </div>
                </div>

                <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--border);">
                    <button id="saveBotBtn" style="padding: 10px 20px; background: var(--accent-success); color: var(--text-inverse); border: none; border-radius: 8px; cursor: pointer;">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>

                <h4 style="margin: 25px 0 10px 0; color: var(--text-accent); padding-top: 20px; border-top: 1px solid var(--border);">üìã –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –±–æ—Ç—ã</h4>
                <div id="botsListContainer" style="max-height: 200px; overflow-y: auto;">
                    –ó–∞–≥—Ä—É–∑–∫–∞...
                </div>
            </div>
            </div>

            <!-- –ú–ê–°–¢–ï–† –ù–ê–°–¢–†–û–ô–ö–ò –¢–ê–ë–õ–ò–¶ -->
            <div id="sheetsWizard" class="wizard-modal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 2001; background: var(--bg-primary); border-radius: var(--radius-lg); padding: var(--space-2xl); max-width: 600px; width: 90%; max-height: 85vh; overflow-y: auto; box-shadow: var(--shadow-2xl); border: none; margin: 0; display: none;">
                <div class="wizard-header">
                    <h4 class="wizard-title">üìä –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü–∞–º–∏</h4>
                    <button class="wizard-close-btn" id="closeSheetsWizardBtn" onclick="telegramSender.closeAllModals()">√ó</button>
                </div>

                <div id="sheetsWizardHeader" style="margin: 20px 0 15px 0; padding: 8px; background: var(--bg-primary); border-radius: 5px; color: var(--text-primary); border: 1px solid var(--border);">
                    –î–ª—è –±–æ—Ç–∞: –ù–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –±–æ—Ç–∞
                </div>

                <div style="display: flex; gap: 15px; margin-bottom: 20px;">
                    <div style="flex: 1;">
                        <label style="color: var(--text-primary);">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã:</label><br>
                        <input type="text" id="newSheetName" placeholder="–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏" style="width: 100%; margin: 5px 0; padding: 6px; background: var(--bg-primary); color: var(--text-primary); border: 1px solid var(--border);">
                    </div>
                    <div style="flex: 2;">
                        <label style="color: var(--text-primary);">Google Sheet ID:</label><br>
                        <input type="text" id="newSheetId" placeholder="2PACX-...-stcQAl7vvV0tgUTsKTHaOFmqF" style="width: 100%; margin: 5px 0; padding: 6px; background: var(--bg-primary); color: var(--text-primary); border: 1px solid var(--border);">
                    </div>
                </div>

                <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--border);">
                    <button id="addSheetBtn" style="padding: 10px 20px; background: var(--accent-warning); color: var(--text-inverse); border: none; border-radius: 8px; cursor: pointer;">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É</button>
                </div>

                <h4 style="margin: 25px 0 10px 0; color: var(--text-accent); padding-top: 20px; border-top: 1px solid var(--border);">üìã –¢–∞–±–ª–∏—Ü—ã –±–æ—Ç–∞</h4>
                <div id="sheetsListContainer" style="max-height: 150px; overflow-y: auto;">
                    –°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞
                </div>
            </div>

            <!-- –°–ï–ö–¶–ò–Ø –ü–õ–ê–ù–ò–†–û–í–©–ò–ö–ê -->
            <div class="section-info" style="padding: 15px; border: 2px solid var(--text-info); border-radius: 10px; background: var(--bg-secondary);">
                <h3 style="margin: 0 0 12px 0; color: var(--text-info);">‚è∞ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫</h3>

                <div style="margin-bottom: 8px;">
                    <input type="datetime-local" id="scheduleDateTime" style="width: 100%; padding: 6px; font-size: 12px;">
                    <div style="display: flex; gap: 5px; margin-top: 4px;">
                        <button id="scheduleBroadcastBtn" style="flex: 1; padding: 6px; font-size: 12px;">‚è∞ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å</button>
                        <button id="cancelScheduleBtn" style="flex: 1; padding: 6px; font-size: 12px; background: #dc3545;">‚ùå –û—Ç–º–µ–Ω–∏—Ç—å</button>
                    </div>
                </div>

                <div style="margin-bottom: 8px;">
                    <label style="font-size: 12px;">–¢–∞–π–º–∞—É—Ç (–º—Å):</label><br>
                    <input type="number" id="messageTimeoutInput" value="1000" min="0" max="30000" step="500" style="width: 80px; padding: 4px; font-size: 12px; margin: 2px 0;">
                    <button id="setTimeoutBtn" style="padding: 3px 8px; font-size: 12px;">üîß</button>
                </div>
            </div>

            <!-- –ü–†–ê–í–ê–Ø –ö–û–õ–û–ù–ö–ê -->

            <!-- –°–ï–ö–¶–ò–Ø –§–ò–õ–¨–¢–†–û–í -->
            <div class="section-red" style="padding: 15px; border: 2px solid var(--accent-error); border-radius: 10px; background: var(--destructive-bg); color: var(--accent-error);">
                <h3 style="margin: 0 0 12px 0; color: var(--accent-error);">üîç –§–∏–ª—å—Ç—Ä—ã</h3>

                <div style="margin-bottom: 8px;">
                    <label style="font-size: 12px; font-weight: bold;">–°—Ç–∞—Ç—É—Å—ã:</label><br>
                    <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-top: 3px;">
                        <label style="font-size: 11px;"><input type="checkbox" id="statusTrial"> trial</label>
                        <label style="font-size: 11px;"><input type="checkbox" id="statusNewSub"> new_sub</label>
                        <label style="font-size: 11px;"><input type="checkbox" id="statusCanceled"> canceled</label>
                        <label style="font-size: 11px;"><input type="checkbox" id="statusKicked"> kicked</label>
                    </div>
                    <label style="font-size: 11px; margin-top: 4px;"><input type="checkbox" id="invertStatus"> –ò—Å–∫–ª—é—á–∏—Ç—å</label>
                </div>

                <div style="margin-bottom: 8px;">
                    <label style="font-size: 12px; font-weight: bold;">–Ø–∑—ã–∫–∏:</label><br>
                    <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-top: 3px;">
                        <label style="font-size: 11px;"><input type="checkbox" id="languageEn"> EN</label>
                        <label style="font-size: 11px;"><input type="checkbox" id="languageRu"> RU</label>
                        <label style="font-size: 11px;"><input type="checkbox" id="languageDe"> DE</label>
                        <label style="font-size: 11px;"><input type="checkbox" id="languageFr"> FR</label>
                        <label style="font-size: 11px;"><input type="checkbox" id="languageEs"> ES</label>
                        <label style="font-size: 11px;"><input type="checkbox" id="languageIt"> IT</label>
                        <label style="font-size: 11px;"><input type="checkbox" id="languagePt"> PT</label>
                        <label style="font-size: 11px;"><input type="checkbox" id="languagePl"> PL</label>
                        <label style="font-size: 11px;"><input type="checkbox" id="languageTr"> TR</label>
                        <label style="font-size: 11px;"><input type="checkbox" id="languageZh"> ZH</label>
                        <label style="font-size: 11px;"><input type="checkbox" id="languageJa"> JA</label>
                        <label style="font-size: 11px;"><input type="checkbox" id="languageKo"> KO</label>
                        <label style="font-size: 11px;"><input type="checkbox" id="languageAr"> AR</label>
                        <label style="font-size: 11px;"><input type="checkbox" id="languageHi"> HI</label>
                        <label style="font-size: 11px;"><input type="checkbox" id="languageOther"> –î—Ä—É–≥–∏–µ</label>
                    </div>
                </div>

                <div style="display: flex; gap: 5px; margin-top: 6px;">
                    <input id="tagFilter" placeholder="–¢–µ–≥" style="flex: 1; padding: 4px; font-size: 12px;">
                    <input id="searchFilter" placeholder="–ü–æ–∏—Å–∫" style="flex: 1; padding: 4px; font-size: 12px;">
                </div>

                <div style="display: flex; gap: 5px; margin-top: 6px;">
                    <button id="resetFilters" style="flex: 1; padding: 4px; font-size: 12px;">üîÑ –°–±—Ä–æ—Å</button>
                    <button id="selectAllStatuses" style="flex: 1; padding: 4px; font-size: 12px;">‚úÖ –í—Å–µ</button>
                </div>
            </div>

            <!-- –û–ë–™–ï–î–ò–ù–ï–ù–ù–´–ô –ú–û–î–£–õ–¨ –°–û–û–ë–©–ï–ù–ò–ô –ò –®–ê–ë–õ–û–ù–û–í -->
            <div class="section-green" style="padding: 15px; border: 2px solid var(--accent-success); border-radius: 10px; background: var(--success-bg);">
                <h3 style="margin: 0 0 12px 0; color: var(--accent-success);">‚úâÔ∏è –°–æ–æ–±—â–µ–Ω–∏—è –∏ —à–∞–±–ª–æ–Ω—ã</h3>

                <!-- –í–ù–£–¢–†–ï–ù–ù–ï–ï –†–ê–ó–î–ï–õ–ï–ù–ò–ï: –°–ù–ê–ß–ê–õ–ê –°–û–û–ë–©–ï–ù–ò–ï -->
                <div style="margin-bottom: 15px; padding-bottom: 12px; border-bottom: var(--border);">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <h4 style="margin: 0; font-size: 13px; color: var(--accent-success);">üìù –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è</h4>
                        <button id="insertLinkBtn" style="padding: 3px 8px; font-size: 11px; background: var(--text-accent); color: var(--text-inverse); border: none; border-radius: 4px; cursor: pointer;">üîó –í—Å—Ç–∞–≤–∫–∞ —Å—Å—ã–ª–∫–∏</button>
                    </div>
                    <textarea id="messageInput" rows="2" cols="50" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏..." style="width: 100%; resize: vertical; min-height: 60px; background: var(--bg-primary); color: var(--text-primary); border: 1px solid var(--border);"></textarea>
                </div>

                <!-- INLINE –ö–ù–û–ü–ö–ò -->
                <div style="margin-bottom: 15px; padding-bottom: 12px; border-bottom: var(--border);">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <h4 style="margin: 0; font-size: 13px; color: var(--accent-success);">üîò Inline –∫–Ω–æ–ø–∫–∏</h4>
                        <small style="color: var(--text-tertiary); font-size: 11px;">(–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –º–∞–∫—Å–∏–º—É–º 10)</small>
                    </div>

                    <!-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∫–Ω–æ–ø–∫–∏ -->
                    <div style="display: flex; gap: 8px; margin-bottom: 8px;">
                        <input type="text" id="newButtonText" placeholder="–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏" style="flex: 1; padding: 4px; font-size: 11px; background: var(--bg-primary); color: var(--text-primary); border: 1px solid var(--border);">
                        <input type="text" id="newButtonUrl" placeholder="URL –∏–ª–∏ callback_data" style="flex: 1; padding: 4px; font-size: 11px; background: var(--bg-primary); color: var(--text-primary); border: 1px solid var(--border);">
                        <select id="newButtonType" style="padding: 4px; font-size: 11px; background: var(--bg-primary); color: var(--text-primary); border: 1px solid var(--border);">
                            <option value="url">URL</option>
                            <option value="callback">Callback</option>
                        </select>
                        <button id="addButton" style="padding: 4px 8px; font-size: 11px; background: var(--accent-success); color: var(--text-inverse); border: none; border-radius: 3px; cursor: pointer;">‚ûï</button>
                    </div>

                    <!-- –°–ø–∏—Å–æ–û–ø –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫ -->
                    <div id="buttonsList" style="display: flex; flex-wrap: wrap; gap: 6px; max-height: 80px; overflow-y: auto;">
                        <!-- –ö–Ω–æ–ø–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
                    </div>

                    <!-- –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –∫–Ω–æ–ø–∫–∏ -->
                    <div style="margin-top: 8px;">
                        <button id="clearButtons" style="padding: 3px 8px; font-size: 10px; background: var(--accent-error); color: var(--text-inverse); border: none; border-radius: 3px; cursor: pointer;">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –∫–Ω–æ–ø–∫–∏</button>
                    <button id="previewButtons" style="padding: 3px 8px; font-size: 10px; background: var(--accent-info); color: var(--text-inverse); border: none; border-radius: 3px; cursor: pointer; margin-left: 4px;">üëÅÔ∏è Preview</button>
                    </div>
                </div>

                <!-- –ü–û–¢–û–ú –®–ê–ë–õ–û–ù–´ -->
                <div>
                    <h4 style="margin: 0 0 8px 0; font-size: 13px; color: var(--accent-success);">üìã –®–∞–±–ª–æ–Ω—ã</h4>

                    <div style="margin-bottom: 8px;">
                        <select id="templateSelect" style="width: 100%; margin: 3px 0; padding: 6px; font-size: 12px;">
                            <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —à–∞–±–ª–æ–Ω --</option>
                        </select>
                    </div>

                    <button id="editTemplatesBtn" style="width: 100%; padding: 6px; font-size: 12px;">‚úèÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —à–∞–±–ª–æ–Ω–æ–≤</button>
                </div>
            </div>

        </div>

        </div>

        <!-- –ú–ò–ù–ò-–ü–ê–ù–ï–õ–¨ –í–¢–û–†–û–°–¢–ï–ü–ï–ù–ù–´–• –§–£–ù–ö–¶–ò–ô (–í –°–ê–ú–û–ú –ù–ò–ó–£) -->
        <div style="margin: 30px 0 10px 0; padding: 8px; border-top: 2px solid #dee2e6; background: #f8f9fa; border-radius: 6px;">

            <!-- –ö–û–ú–ü–ê–ö–¢–ù–ê–Ø –°–¢–†–û–ö–ê –£–í–ï–î–û–ú–õ–ï–ù–ò–ô -->
            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                <small style="font-size: 10px; color: #6c757d; font-weight: bold;">üîî</small>
                <div style="display: flex; gap: 2px; flex: 1;">
                    <button id="requestNotificationsBtn" style="padding: 2px 6px; font-size: 9px; min-width: auto;">üîî</button>
                    <button id="testNotificationBtn" style="padding: 2px 6px; font-size: 9px; min-width: auto;">üîä</button>
                    <button id="checkNotificationSupportBtn" style="padding: 2px 6px; font-size: 9px; min-width: auto;">üîç</button>
                    <button id="soundSettingsBtn" style="padding: 2px 6px; font-size: 9px; min-width: auto;">‚öôÔ∏è</button>
                </div>
                <div id="notificationInfo" style="padding: 2px 4px; background: #e0f9e0; border-radius: 2px; font-size: 8px; color: black; margin-left: auto;">
                    –ü—Ä–æ–≤–µ—Ä–∫–∞...
                </div>
            </div>

            <!-- –ö–û–ú–ü–ê–ö–¢–ù–ê–Ø –°–¢–†–û–ö–ê –≠–ö–°–ü–û–†–¢–ê/–ò–ú–ü–û–†–¢–ê -->
            <div style="display: flex; align-items: center; gap: 8px;">
                <small style="font-size: 10px; color: #6c757d; font-weight: bold;">üìÑ</small>
                <div style="display: flex; gap: 2px; flex: 1;">
                    <button id="exportHistoryCSVBtn" style="padding: 2px 6px; font-size: 9px; min-width: auto;">CSV</button>
                    <button id="exportHistoryPDFBtn" style="padding: 2px 6px; font-size: 9px; min-width: auto;">PDF</button>
                    <input type="file" id="importUsersFile" accept=".csv" style="flex: 2; margin: 0; font-size: 9px; padding: 2px 4px; height: 20px; border-radius: 3px;">
                    <button id="importUsersBtn" style="padding: 2px 6px; font-size: 9px; min-width: auto;">üì•</button>
                </div>
            </div>

        </div>

        <!-- –£–±–∏—Ä–∞–µ–º –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±–ª–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏—è - —Ç–µ–ø–µ—Ä—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–æ–≥–æ –º–æ–¥—É–ª—è -->

        <!-- –í–ò–ó–ê–†–î –í–°–¢–ê–í–ö–ò –°–°–´–õ–û–ö (–°–ö–†–´–¢ –ü–û –£–ú–û–õ–ß–ê–ù–ò–Æ) -->
            <div id="linkWizard" class="wizard-modal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 2001; background: var(--bg-primary); border-radius: var(--radius-lg); padding: var(--space-2xl); max-width: 600px; width: 90%; max-height: 85vh; overflow-y: auto; box-shadow: var(--shadow-2xl); border: none; margin: 0; display: none;">
                <div class="wizard-header">
                    <h4 class="wizard-title">üîó –í—Å—Ç–∞–≤–∫–∞ —Å—Å—ã–ª–∫–∏ –≤ —Å–æ–æ–±—â–µ–Ω–∏–µ</h4>
                    <button class="wizard-close-btn" onclick="telegramSender.closeAllModals()">√ó</button>
                </div>

                <div style="margin-bottom: 10px;">
                    <label style="color: var(--text-primary);"><strong>–¢–µ–∫—Å—Ç —Å—Å—ã–ª–∫–∏:</strong> (–±—É–¥–µ—Ç –≤—ã–¥–µ–ª–µ–Ω –∫–∞–∫ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–π)</label><br>
                    <input type="text" id="linkText" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: '–ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–∞–π—Ç—É'" style="width: 100%; margin: 5px 0; padding: 8px; font-size: 14px; background: var(--bg-primary); color: var(--text-primary); border: 1px solid var(--border);">
                </div>

                <div style="margin-bottom: 15px;">
                    <label style="color: var(--text-primary);"><strong>URL —Å—Å—ã–ª–∫–∏:</strong></label><br>
                    <input type="url" id="linkUrl" placeholder="https://example.com" style="width: 100%; margin: 5px 0; padding: 8px; font-size: 14px; background: var(--bg-primary); color: var(--text-primary); border: 1px solid var(--border);">
                </div>

                <div style="margin-bottom: 15px; padding: 10px; background: var(--accent-bg); border-radius: 5px;">
                    <strong style="color: var(--text-primary);">‚úÖ Preview:</strong><br>
                    –ü—Ä–∏–º–µ—Ä: –ü—Ä–∏–≤–µ—Ç! [–ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–∞–π—Ç—É](https://example.com) - –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ä–∞–∑–≥–æ–≤–æ—Ä.
                </div>

                <small style="color: var(--text-tertiary); display: block; margin-bottom: 15px;">
                    üí° Telegram –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–¥–µ–ª–∏—Ç —Ç–µ–∫—Å—Ç –≤ [–∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö —Å–∫–æ–±–∫–∞—Ö] –∫–∞–∫ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
                </small>

                <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--border);">
                    <button id="insertLinkConfirmBtn" style="padding: 10px 20px; background: var(--accent-success); color: var(--text-inverse); border: none; border-radius: 8px; cursor: pointer;" onclick="
                        const text = document.getElementById('linkText').value.trim();
                        const url = document.getElementById('linkUrl').value.trim();
                        if (text && url) {
                            window.telegramSender.addLinkTemplate(text, url);
                            const messageInput = document.getElementById('messageInput');
                            if (messageInput) {
                                const currentText = messageInput.value;
                                const htmlLink = `<a href='${url}'>${text}</a>`;
                                messageInput.value = currentText + htmlLink + ' ';
                                messageInput.focus();
                            }
                            document.getElementById('linkWizard').style.display = 'none';
                            alert('–°—Å—ã–ª–∫–∞ –≤—Å—Ç–∞–≤–ª–µ–Ω–∞ –≤ —Å–æ–æ–±—â–µ–Ω–∏–µ!');
                        } else {
                            alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!');
                        }
                    ">‚úÖ –í—Å—Ç–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É</button>
                </div>

                <div style="margin-top: 20px; padding-top: 15px; border-top: 1px solid var(--border);">
                    <h5>üìö –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏:</h5>
                    <div id="linkTemplatesListContainer" style="max-height: 150px; overflow-y: auto;">
                        <div style="color: var(--text-secondary); font-style: italic;">–°–Ω–∞—á–∞–ª–∞ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Å—Å—ã–ª–∫—É, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –µ–µ –∑–¥–µ—Å—å</div>
                    </div>
                </div>
            </div>

        <!-- –ù–ê–°–¢–†–û–ô–ö–ò –ó–í–£–ö–ê –£–í–ï–î–û–ú–õ–ï–ù–ò–ô (–°–ö–†–´–¢–û –ü–û –£–ú–û–õ–ß–ê–ù–ò–Æ) -->
        <div id="soundSettingsWizard" class="wizard-modal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 2001; background: var(--bg-primary); border-radius: var(--radius-lg); padding: var(--space-2xl); max-width: 600px; width: 90%; max-height: 85vh; overflow-y: auto; box-shadow: var(--shadow-2xl); border: none; margin: 0; display: none;">
            <div class="wizard-header">
                <h4 class="wizard-title">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–≤—É–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</h4>
                <button class="wizard-close-btn" onclick="telegramSender.closeAllModals()">√ó</button>
            </div>

            <div style="display: flex; gap: 20px;">
                <div style="flex: 1;">
                    <div style="margin-bottom: 12px;">
                        <label style="color: var(--text-primary);"><strong>–¢–∏–ø –≤–æ–ª–Ω—ã:</strong></label><br>
                        <select id="waveTypeSelect" style="margin: 5px 0; padding: 5px; width: 100%; background: var(--bg-primary); color: var(--text-primary); border: 1px solid var(--border);">
                            <option value="sine">–°–∏–Ω—É—Å–æ–∏–¥–∞ (–≥–ª–∞–¥–∫–∏–π)</option>
                            <option value="square">–ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∞—è (–æ—Å—Ç—Ä—ã–π)</option>
                            <option value="sawtooth">–ü–∏–ª–∞ (–º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–π)</option>
                            <option value="triangle">–¢—Ä–µ—É–≥–æ–ª—å–Ω–∞—è (–º—è–≥–∫–∏–π)</option>
                        </select>
                    </div>

                    <div style="margin-bottom: 12px;">
                        <label style="color: var(--text-primary);"><strong>–ß–∞—Å—Ç–æ—Ç–∞:</strong> <span id="frequencyValue">932</span> Hz</label><br>
                        <input type="range" id="frequencySlider" min="200" max="2000" value="932" step="10" style="width: 100%; margin: 5px 0;">
                        <small style="color: var(--text-tertiary);">–ù–∏–∑–∫–∏–π: 200–ì—Ü ‚Ä¢ –í—ã—Å–æ–∫–∏–π: 2000–ì—Ü</small>
                    </div>
                </div>

                <div style="flex: 1;">
                    <div style="margin-bottom: 12px;">
                        <label style="color: var(--text-primary);"><strong>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</strong> <span id="durationValue">300</span> –º—Å</label><br>
                        <input type="range" id="durationSlider" min="100" max="1000" value="300" step="50" style="width: 100%; margin: 5px 0;">
                        <small style="color: var(--text-tertiary);">–ö–æ—Ä–æ—Ç–∫–∏–π: 100–º—Å ‚Ä¢ –î–ª–∏–Ω–Ω—ã–π: 1000–º—Å</small>
                    </div>

                    <div style="margin-bottom: 12px;">
                        <label style="color: var(--text-primary);"><strong>–ì—Ä–æ–º–∫–æ—Å—Ç—å:</strong> <span id="volumeValue">10</span>%</label><br>
                        <input type="range" id="volumeSlider" min="1" max="50" value="10" step="1" style="width: 100%; margin: 5px 0;">
                        <small style="color: var(--text-tertiary);">–¢–∏—Ö–∏–π: 1% ‚Ä¢ –ì—Ä–æ–º–∫–∏–π: 50%</small>
                    </div>
                </div>
            </div>

            <div style="margin-top: 15px; display: flex; gap: 10px;">
                <button id="testSoundBtn" style="padding: 8px 15px; background: var(--accent-info); color: var(--text-inverse);">üîä –¢–µ—Å—Ç –∑–≤—É–∫–∞</button>
                <button id="saveSoundSettingsBtn" style="padding: 8px 15px; background: var(--accent-success); color: var(--text-inverse);">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button id="resetSoundSettingsBtn" style="padding: 8px 15px; background: var(--accent-error); color: var(--text-inverse);">üîÑ –°–±—Ä–æ—Å–∏—Ç—å</button>
                <button id="cancelSoundSettingsBtn" style="padding: 8px 15px; background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border);">‚ùå –û—Ç–º–µ–Ω–∞</button>
            </div>

            <small style="color: var(--text-tertiary); margin-top: 10px; display: block;">
                üí° –°–∏–Ω—É—Å–æ–∏–¥–∞ - –º—è–≥–∫–∏–π –∑–≤—É–∫ ‚Ä¢ –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∞—è - —Ä–µ–∑–∫–∏–π ‚Ä¢ –ß–∞—Å—Ç–æ—Ç–∞ 932–ì—Ü = Android —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            </small>
        </div>

        <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ò–°–¢–û–†–ò–ò –°–û–û–ë–©–ï–ù–ò–ô –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø -->
        <div id="userHistoryWizard" class="wizard-modal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 2001; background: var(--bg-primary); border-radius: var(--radius-lg); padding: var(--space-2xl); max-width: 700px; width: 90%; max-height: 85vh; overflow-y: auto; box-shadow: var(--shadow-2xl); border: none; margin: 0; display: none;">
            <div class="wizard-header">
                <h4 class="wizard-title" id="userHistoryTitle">üìÑ –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π</h4>
                <button class="wizard-close-btn" id="closeUserHistoryWizardBtn" onclick="telegramSender.closeAllModals()">√ó</button>
            </div>

            <div id="userHistoryWizardHeader" style="margin: 20px 0 15px 0; padding: 8px; background: var(--bg-primary); border-radius: 5px; color: var(--text-primary); border: 1px solid var(--border);">
                –ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ...
            </div>

            <div id="userHistoryContent" style="min-height: 200px;">
                <div style="text-align: center; color: var(--text-secondary); padding: 40px;">
                    üìÑ –ó–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∏—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                </div>
            </div>

            <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--border);">
                <button id="clearUserHistoryBtn" style="padding: 8px 15px; background: var(--accent-error); color: var(--text-inverse); border: none; border-radius: 8px; cursor: pointer;">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</button>
                <button id="closeUserHistoryBtn" style="padding: 8px 15px; background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border); cursor: pointer;" onclick="telegramSender.closeAllModals()">‚ùå –ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>

        <!-- –ú–ê–°–¢–ï–† –ù–ê–°–¢–†–û–ô–ö–ò –®–ê–ë–õ–û–ù–û–í (–í–¢–û–†–û–°–¢–ï–ü–ï–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø) -->
        <div id="templateWizard" class="wizard-modal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 2001; background: var(--bg-primary); border-radius: var(--radius-lg); padding: var(--space-2xl); max-width: 600px; width: 90%; max-height: 85vh; overflow-y: auto; box-shadow: var(--shadow-2xl); border: none; margin: 0; display: none;">
            <div class="wizard-header">
                <h4 class="wizard-title">‚úèÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞–º–∏</h4>
                <button class="wizard-close-btn" onclick="telegramSender.closeAllModals()">√ó</button>
            </div>

            <div style="display: flex; gap: 15px;">
                <div style="flex: 1;">
                    <label style="color: var(--text-primary);">–ù–∞–∑–≤–∞–Ω–∏–µ:</label><br>
                    <input type="text" id="newTemplateName" placeholder="–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" style="width: 100%; margin: 5px 0; padding: 6px; background: var(--bg-primary); color: var(--text-primary); border: 1px solid var(--border);">
                </div>
                <div style="flex: 2;">
                    <label style="color: var(--text-primary);">–¢–µ–∫—Å—Ç:</label><br>
                    <textarea id="newTemplateText" placeholder="{username}! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å..." rows="2" style="width: 100%; margin: 5px 0; padding: 6px; background: var(--bg-primary); color: var(--text-primary); border: 1px solid var(--border);"></textarea>
                </div>
            </div>

            <div style="margin-top: 15px;">
                <button id="addTemplateBtn" style="padding: 8px 15px; background: var(--accent-secondary); color: var(--text-inverse);">‚ûï –î–æ–±–∞–≤–∏—Ç—å —à–∞–±–ª–æ–Ω</button>
                <button id="cancelTemplateWizardBtn" style="margin-left: 10px; padding: 8px 15px; background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border);">‚ùå –û—Ç–º–µ–Ω–∞</button>
            </div>

            <h4 style="margin: 25px 0 10px 0; color: var(--text-accent);">üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã</h4>
            <div id="templatesListContainer" style="max-height: 200px; overflow-y: auto;">
                –°–Ω–∞—á–∞–ª–∞ –¥–æ–±–∞–≤—å—Ç–µ —à–∞–±–ª–æ–Ω—ã
            </div>
        </div>

        <!-- –ü–†–ê–í–ê–Ø –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –ö–û–õ–û–ù–ö–ê –° –°–ß–ï–¢–ß–ò–ö–ê–ú–ò –ò –õ–û–ì–û–ú -->
        <div style="margin: 20px 0;">
            <div style="display: flex; justify-content: space-between; align-items: flex-start; gap: 20px;">
                    <div id="usersCount" style="font-weight: bold; flex: 1;">
                        üë• <span>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: 0</span>
                        <div id="usersSelectedInfo" style="color: #007bff; font-size: 14px; margin-top: 5px;">–í—ã–±—Ä–∞–Ω–æ: 0</div>
                        <div style="text-align: center; color: var(--text-secondary); margin-top: 10px; font-weight: normal;">
                            üí° –ù–∞–∂–º–∏—Ç–µ "üìÑ –ò—Å—Ç–æ—Ä–∏—è" –≤ —Ç–∞–±–ª–∏—Ü–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                        </div>
                    </div>

                <div style="text-align: right;">
                    <button id="selectAllUsersBtn" style="padding: 5px 10px;">‚úÖ –í—ã–±—Ä–∞—Ç—å –≤—Å–µ</button>
                    <button id="clearUsersSelectionBtn" style="padding: 5px 10px; margin-left: 5px;">‚ùå –°–Ω—è—Ç—å –≤—ã–±–æ—Ä</button>
                </div>
            </div>
        </div>

        <div style="margin: 20px 0;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                <h3 style="margin: 0;">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:</h3>
                <div>
                    <button id="selectAllUsersBtn" style="padding: 5px 10px; margin-left: 10px;">‚úÖ –í—ã–±—Ä–∞—Ç—å –≤—Å–µ</button>
                    <button id="clearUsersSelectionBtn" style="padding: 5px 10px; margin-left: 5px;">‚ùå –°–Ω—è—Ç—å –≤—ã–±–æ—Ä</button>
                </div>
            </div>

            <div style="max-height: 400px; overflow: auto; border: 2px solid #e9ecef; border-radius: 8px; background: white;">
                        <table id="usersTable" style="width: 100%; min-width: 1200px; border-collapse: collapse; font-size: 12px;">
                            <thead>
                                <tr style="background: var(--bg-secondary); position: sticky; top: 0; z-index: 1;">
                                    <th style="border-bottom: 2px solid var(--border); padding: 8px 4px; text-align: left; width: 30px;">
                                        <input type="checkbox" id="masterUserCheckbox" style="transform: scale(1.1);">
                                    </th>
                                    <th style="border-bottom: 2px solid var(--border); padding: 8px 4px;" class="sortable" data-sort="user_id">üÜî ID</th>
                                    <th style="border-bottom: 2px solid var(--border); padding: 8px 4px;" class="sortable" data-sort="first_name">üë§ –ò–º—è</th>
                                    <th style="border-bottom: 2px solid var(--border); padding: 8px 4px;" class="sortable" data-sort="last_name">üë§ –§–∞–º–∏–ª–∏—è</th>
                                    <th style="border-bottom: 2px solid var(--border); padding: 8px 4px;" class="sortable" data-sort="username">üë• Username</th>
                                    <th style="border-bottom: 2px solid var(--border); padding: 8px 4px;" class="sortable" data-sort="status">üìä –°—Ç–∞—Ç—É—Å</th>
                                    <th style="border-bottom: 2px solid var(--border); padding: 8px 4px;" class="sortable" data-sort="language">üåç –Ø–∑—ã–∫</th>
                                    <th style="border-bottom: 2px solid var(--border); padding: 8px 4px;" class="sortable" data-sort="premium">‚≠ê –ü—Ä–µ–º–∏—É–º</th>
                                    <th style="border-bottom: 2px solid var(--border); padding: 8px 4px;" class="sortable" data-sort="traffic_from">üö¶ –ò—Å—Ç–æ—á–Ω–∏–∫</th>
                                    <th style="border-bottom: 2px solid var(--border); padding: 8px 4px;" class="sortable" data-sort="trial_img_gen_calls">üé® Triall Calls</th>
                                    <th style="border-bottom: 2px solid var(--border); padding: 8px 4px;" class="sortable" data-sort="tag">üè∑Ô∏è –¢–µ–≥</th>
                                    <th style="border-bottom: 2px solid var(--border); padding: 8px 4px;" class="sortable" data-sort="last_sent">üìÖ –ü–æ—Å–ª–µ–¥–Ω—è—è –æ—Ç–ø—Ä–∞–≤–∫–∞</th>
                                </tr>
                            </thead>
                    <tbody id="usersTableBody">
                        <tr>
                            <td colspan="6" style="text-align: center; padding: 40px; color: #6c757d;">
                                üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="logContainer" style="margin: 20px 0; background: #f8f9fa; padding: 10px; max-height: 200px; overflow-y: auto; font-size: 12px; color: #333; border: 1px solid #dee2e6; border-radius: 4px;">
            <strong>–õ–æ–≥ –¥–µ–π—Å—Ç–≤–∏–π:</strong><br>
        </div>

        <div class="modal-overlay" style="display: none;"></div>
    </div>

    <!-- –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Å–∫—Ä—ã—Ç—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ -->
    <div style="display: none;">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <header class="block-header">
            <h1>–ü–∞–Ω–µ–ª—å —Ä–∞—Å—Å—ã–ª–∫–∏ Telegram</h1>
            <p class="block-subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Å—Å–æ–≤—ã–º–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –±–æ—Ç–∞</p>
        </header>
        <!-- –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ -->
        <div id="loadingScreen" class="loading-screen">
            <div class="loading-spinner"></div>
            <div class="loading-text">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è WebApp...</div>
        </div>
        <!-- –≠–∫—Ä–∞–Ω –æ—à–∏–±–∫–∏ –¥–æ—Å—Ç—É–ø–∞ -->
        <div id="errorScreen">
            <div class="access-denied-screen">
                <div class="access-denied-icon">üîí</div>
                <h2 class="access-denied-title">–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω</h2>
                <p class="access-denied-text">–¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</p>
            </div>
        </div>
        <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ -->
        <div class="app-container">
            <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
            <section class="controls-section">
                <div class="controls-row">
                    <button class="btn btn-primary" id="refreshBtn">üîÑ –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
                    <button class="btn btn-secondary" id="historyBtn">üìö –ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—Å—ã–ª–æ–∫</button>
                </div>
                <!-- –§–∏–ª—å—Ç—Ä—ã -->
                <div class="filters-panel">
                    <div class="filter-group">
                        <label class="filter-label">–°—Ç–∞—Ç—É—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</label>
                        <select class="filter-select" id="statusFilterOld">
                            <option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                            <option value="active">üü¢ –ê–∫—Ç–∏–≤–Ω—ã–µ</option>
                            <option value="inactive">üü° –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ</option>
                            <option value="kicked">üî¥ –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–≤—à–∏–µ –±–æ—Ç–∞</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">–¢—ç–≥</label>
                        <input type="text" class="filter-input" id="tagFilterOld">
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">–ü–æ–∏—Å–∫</label>
                        <input type="text" class="filter-input" id="searchFilterOld">
                    </div>
                    <div class="filter-group">
                        <div class="filter-actions">
                            <button class="btn btn-sm btn-secondary" id="resetFiltersOld">üîÑ –°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
                        </div>
                    </div>
                </div>
                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div class="controls-row">
                    <div class="status-indicator" id="statusIndicator">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                    <div class="status-indicator status-info" id="usersStats">0 –∏–∑ 0 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                </div>
            </section>
            <!-- –û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
            <main class="main-app">
                <!-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
                <section class="content-section">
                    <div class="users-table-container">
                        <table class="users-table">
                            <thead>
                                <tr>
                                    <th>ID –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</th>
                                    <th>–ò–º—è / Username</th>
                                    <th>–°—Ç–∞—Ç—É—Å</th>
                                    <th>–¢—ç–≥</th>
                                    <th>–ü–æ—Å–ª–µ–¥–Ω—è—è —Ä–∞—Å—Å—ã–ª–∫–∞</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </section>
            </main>
            <!-- –ü–∞–Ω–µ–ª—å —Ä–∞—Å—Å—ã–ª–∫–∏ -->
            <section class="broadcast-section">
                <button class="broadcast-toggle">–ù–∞—á–∞—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É</button>
                <div class="broadcast-form">
                    <div class="message-input-group">
                        <label class="form-label">–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è</label>
                        <textarea class="message-input" maxlength="4096"></textarea>
                    </div>
                    <div class="buttons-input-group">
                        <label class="form-label">–ö–Ω–æ–ø–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, JSON)</label>
                        <textarea class="buttons-input" rows="3"></textarea>
                    </div>
                    <button class="send-button" disabled>–û—Ç–ø—Ä–∞–≤–∏—Ç—å (0 –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π)</button>
                </div>
                <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä -->
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                    <div class="progress-text">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞...</div>
                </div>
            </section>
            <!-- –†–∞–∑–¥–µ–ª –∏—Å—Ç–æ—Ä–∏–∏ -->
            <section class="history-section"></section>
        </div>
    </div>

    <!-- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è -->
    <script src="./config.js"></script>

    <!-- –ú–æ–¥—É–ª–∏ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <script src="./telegram-storage.js"></script>
    <script src="./telegram-messaging.js"></script>
    <script src="./telegram-users.js"></script>
    <script src="./telegram-bots.js"></script>
    <script src="./telegram-templates.js"></script>
    <script src="./telegram-links.js"></script>
    <script src="./telegram-buttons.js"></script>
    <script src="./telegram-settings.js"></script>
    <script src="./telegram-notifications.js"></script>
    <script src="./telegram-scheduler.js"></script>

    <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º —Å SVG –∏–∫–æ–Ω–∫–∞–º–∏ -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º —Å —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –∏–∫–æ–Ω–∫–∞–º–∏ –∏ —É–ª—É—á—à–µ–Ω–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–µ–π
        const themeButtons = document.querySelectorAll('.theme-option');

        // –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ç–µ–º—ã
        function applyTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±–æ—Ä –≤ localStorage
            localStorage.setItem('telegramSenderTheme', theme);

            // –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
            themeButtons.forEach(btn => {
                if(btn.dataset.theme === theme) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });

            // –ê–Ω–∏–º–∞—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è –ª–æ–≥–æ—Ç–∏–ø–∞ –∏ –∫–ª—é—á–µ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
            const logo = document.querySelector('h1');
            if(logo) {
                logo.style.animation = 'none';
                logo.offsetHeight; // trigger reflow
                logo.style.animation = 'fadeIn 0.3s ease-out';
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–æ–≤ –ø–æ –∫–Ω–æ–ø–∫–∞–º —Ç–µ–º
        themeButtons.forEach(button => {
            button.addEventListener('click', function() {
                const theme = this.dataset.theme;
                applyTheme(theme);

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ—Å—Ç —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
                if(window.showToast) {
                    const themeNames = {
                        'light': '–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞',
                        'gray': '–°–µ—Ä–∞—è —Ç–µ–º–∞',
                        'dark': '–¢—ë–º–Ω–∞—è —Ç–µ–º–∞',
                        'blue-cyan': '–ú–æ–¥–Ω–∞—è —Å–∏–Ω–µ-–≥–æ–ª—É–±–∞—è —Ç–µ–º–∞'
                    };
                    window.showToast(`${themeNames[theme] || '–¢–µ–º–∞'} –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞`, 'info');
                }
            });
        });

        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—É—é —Ç–µ–º—É
        const savedTheme = localStorage.getItem('telegramSenderTheme') || 'light';
        if(savedTheme) {
            applyTheme(savedTheme);
        }

        // –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –∏–∫–æ–Ω–æ–∫ —Ç–µ–º
        themeButtons.forEach(button => {
            const icon = button.querySelector('svg');
            if(icon) {
                button.addEventListener('mouseenter', () => {
                    icon.style.transform = 'scale(1.1) rotate(5deg)';
                });
                button.addEventListener('mouseleave', () => {
                    icon.style.transform = 'scale(1) rotate(0deg)';
                });
            }
        });

    });
    </script>

    <script src="./app.js"></script>
</body>

</html>
